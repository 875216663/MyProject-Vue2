token面试题:项目当中token过期、失效如何处理？
答：清除本地token（本地存储），让用户回到登录页，获取最新的token




项目day12:今天课程重点【登录注册业务】

1.1:注册业务已经完成【手机号、验证码、登录密码】，点击注册按钮的时候，需要把这些信息给服务器传递过去
手机号:11位
验证码：4-6
登录密码：英文字母、数字、首字母大写等等

1.2登录业务
当你点击登录按钮的时候，需要把手机号、密码需要携带给服务器，服务器需要判断，你是不是我的用户【注册过的】
如果是用户登录成功，进行登录，如果用户登录失败给一个提示即可。

1.3token【令牌：字符串，服务器下发给用户的身份凭证】
举例子:古代大战，兵符
*******************************************************************************************

token是在哪里展示呢，是在api请求头的时候检查是不是有token，有的话就添加到请求头里面。 

一、用户登录以后获取用户信息进行展示

企业项目:sh
还需要再发请求【用户信息】，携带token给服务器。 
api/user/passport/auth/getUserInfo 获取用户信息的接口



1.1:为什么刷新页面，用户信息就消失
用户刷新页面，用户信息消失没了获取不到，因为token没有携带给服务器。
Vuex存储数据是否持持久化的?并非持久化
用户登录时候点击按钮将用户名和密码向服务器发送请求，登陆成功获取token，路由跳转，因此刷新的话，token就没了，用户信息也就没了。

解决方案：
1.2：本地存储持久化存储token




1.2为什么去别的模块【非home模块】获取用户信息失败？
因为你去别的模块根本没有发请求获取用户信息，没办法展示用户信了

怎么解决:
每一个组件都在mounted里面发起获取用户信息，进行展示（可以太麻烦）
残留的问题：用户在home模块刷新的时候，用户信息一直在展示（mounted执行的时候在向服务器发请求、获取用户信息展示）

home->search[用户信息刷新数据就没了，因为在search模块当中根本没有发请求获取用户信息]
search-detail[根本没有获取用户信息进行展示]



二、退出登录
2.1发请求，需要通知服务器，把现在用户身份token【销毁】
2.2清除仓库数据+本地存储数据【都需要清理】




三、演示一些操作，你看一下是否正常?
用户已经登录了，用户想从home路由跳转到login路由，不应该这么操作了。
现在用户登录以后，home路由不应该跳转到login路由当中【因为登陆了】，
但是咱们以现在认知【技术】，没办法约束从home调到login


我遇到的一个问题与解决：
我遇到的问题是：用户已经登录了，用户想从home路由跳转到login路由，不应该这么操作了。
现在用户登录以后，home路由不应该跳转到login路由当中【因为登陆了】，用到了导航守卫，可以进行判断。

解决方案：全局守卫，在路由跳转之前进行判断，如果用户已经登录了，就不让他跳转到login路由。获取token，判断是否登录，如果登录了，就不让他跳转到login路由。
我本来将获取用户信息放在了主页挂载的时候，在路由跳转会导致页面刷新的时候，用户信息就没了。所以我将获取用户信息的dispatch放在了全局守卫里面，这样在判断完毕后，再刷新后，用户信息就能展示出来。




四、导航守卫*****
守卫条件判断*****

导航:表示路由正在发生改变。
守卫:古代的守门的士兵'守卫'，守卫可以通过条件判断路由能不能进行跳转。

三大守卫:

1。全局守卫：
项目当中任何路由变化都可以检测到，通过条件判断可不可以进行路由跳转。
前置守卫：路由跳转之前可以做一些事情。
后置守卫：路由跳转已经完成在执行。
//全局守卫:[后置守卫:在路由跳转完毕之后才会执行一次]
router.afterEach(()=>{
     console.log('守卫:路由跳转完毕才会执行一次')
})



4.1用户已经登录了，不应该在访问login？【通过什么条件能判断用户登录、未登录】
2.路由独享守卫：
针对某一个路由的守卫

3.组件内守卫：
也是负责某一个路由守卫





5)身份凭证?
以后登录：
TOKEN身份为大
5.1UUID生成的临时省份
5.2用户（注册与登录）token【正式身份】






























































